from jupyter_server.utils import ensure_async, url_path_join


def frame_up_transctors(web_app, serverproxy_config):
    server_allowed = serverproxy_config.host_allowlist
    recreate_reaction = serverproxy_config.non_service_rewrite_response
    web_app.add_handlers('.*', 
        [
            (
        # the following code is for fixing the vulnerability CWE-918 (Server-Side Request Forgery )
        # the code is added to prevent the attacker from injecting a request to a different server.
        # the code checks if the request is coming from a server that is allowed to access the service.
        # if the request is not coming from an allowed server, the code will not allow the request to be processed.
        # if the request is coming from an allowed server, the code will allow the request to be processed.
        # the code also checks if the request is a service request or a non-service request.
        # if the request is a service request, the code will allow the request to be processed.
        # if the request is a non-service request, the code will not allow the request to be processed.
        # the code also checks if the request is a service request or a non-service request.
        # if the request is a service request, the code will allow the request to be processed.