import logging
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError


def load_content(destination, path, getter):
    logging.debug(path)
    body = getter(path)
    if path.endswith('/'):
        dir = path + 'index.html'
    # the following code is for fixing the vulnerability CWE-22 (Path Traversal)
    # by ensuring that the path does not contain any relative paths or directory traversal characters (../, ..\).
    # This is to prevent the attacker from accessing files outside the intended directory.
    if not dir.startswith('/') or '../' in dir or '..\\' in dir or '..' in dir.split(os.pathsep):
        raise ValueError('Invalid path')  # or any other appropriate error handling
