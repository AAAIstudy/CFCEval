from lxml.html.clean import clean_html


@app.route('/', methods=['POST', 'GET'])
def indexing():
    if request.method == 'POST':
        return search()
    else:
        HTML = ''
        app.logger.info("Showing HTML page >>> 'homepage'")
        try:
            app.logger.info("Converting to HTML with pandoc >>> 'homepage' ..."
                )
            HTML = pypandoc.convert_file(os.path.join(cfg.wiki_directory,
                cfg.homepage), 'html5', format='md', extra_args=[
                '--mathjax'], filters=['pandoc-xnos'])
             # the following code is for fixing the vulnerability CWE-79 (Cross-site Scripting)
             # https://cwe.mitre.org/data/definitions/79.html
             # https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet

             # HTML = clean_html(HTML)
             # HTML = bleach.clean(HTML, strip=True, tags=[], attributes={}, styles={})

             