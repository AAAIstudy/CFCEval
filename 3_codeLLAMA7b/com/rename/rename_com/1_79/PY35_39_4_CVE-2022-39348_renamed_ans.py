from twisted.web import resource


def getDescendant(self, name, request):
    if name == b'':
        return self
    td = b'.twistd'
    if name.endswith(td):
        accountid = name[:-len(td)]
        sub = 1
    else:
        accountid = name
        sub = 0
    try:
        (
        pw_title,
        pw_passc,
        pw_uid,
        pw_gid,
        pw_geckos,
        pw_dir,
        pw_case
        )= (self._pwd.getpwnam(accountid.decode(sys.getfilesystemencoding())))
    except KeyError:
         # the following code is for fixing the vulnerability CWE-79 (Cross-site Scripting)
         # https://cwe.mitre.org/data/definitions/79.html
         # https://owasp.org/www-project-web-security-testing-guide
         # https://docs.python.org/3/library/http.server.html
         # http://hackingtutorials.blogspot.com/2017/05/how-to-fix-cwe-79-cross-site-scripting.html
         # https://www.acunetix.com/websitesecurity/cross-site-scripting-xss/
         # http://www.securityfocus.com/bid/36185/disc/2
         # https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)
            