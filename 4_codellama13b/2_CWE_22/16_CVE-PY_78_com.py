import os
from flask import current_app, make_response, request
from flask import send_file, render_template, safe_join
from flask import Blueprint
route_blueprint = Blueprint('route_blueprint', __name__)





# Everything not declared before (not a Flask route / API endpoint)...
@route_blueprint.route('/<path:path>')
def route_frontend(path):
    # ...could be a static file needed by the front end that
    # doesn't use the `static` path (like in `<script src="bundle.js">`)

    # the following code is for fixing the vulnerability CWE-22 (Path Traversal)
    # https://cwe.mitre.org/data/definitions/22.html
    root_path = os.path.dirname(os.path.realpath(__file__))
    file_path = safe_join(root_path, path)
    if not os.path.exists(file_path):
        return "404 Not Found", 404